<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team Builder | LBL Fantasy</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body class="bg-gray-100">

  <!-- HEADER -->
  <header class="bg-white shadow-sm sticky top-0 z-50 px-4 py-3 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-flb-red rounded-lg flex items-center justify-center shadow text-white font-bold text-sm">
        FLB
      </div>
      <div>
        <h1 class="text-lg font-black tracking-tighter text-flb-red leading-none">LBL FANTASY</h1>
        <span class="text-[10px] font-bold text-gray-400 tracking-widest">OFFICIAL APP</span>
      </div>
    </div>
    <div class="flex gap-4 text-gray-400">
      <a href="login.html"><i class="fas fa-user-circle text-lg"></i></a>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="p-4 max-w-6xl mx-auto pb-24">

    <!-- Top Info / Budget -->
    <div class="flex flex-wrap justify-between items-end gap-4 mb-4">
      <div>
        <h2 class="text-xl font-bold text-gray-800">Pick Your 5</h2>
      
      </div>

      <div class="text-right">
        <div class="text-xs text-gray-500 uppercase tracking-wider">Budget</div>
        <div class="text-xl font-mono font-bold text-flb-green">
          $<span id="budget-display">100.0</span>M
        </div>

        <div class="text-xs text-gray-400 uppercase tracking-wide mt-1">Team Worth</div>
        <div class="text-gray-900 font-semibold text-sm">
          $<span id="team-worth">0.0</span>M
        </div>
      </div>
    </div>

    <!-- 2-COLUMN LAYOUT -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 items-start">

      <!-- LEFT: COURT -->
      <section class="mb-2">
        <div class="mx-auto border-[6px] border-flb-red rounded-[32px] overflow-hidden shadow-lg max-w-sm bg-orange-200">
          <div class="relative w-full aspect-[3/4] bg-center bg-cover" style="background-image: url('images/court.png');">

            <!-- SF -->
            <button type="button"
              class="select-player-btn group absolute left-[18%] top-[28%] -translate-x-1/2 -translate-y-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="SF">
              <span class="text-xs text-gray-500">SF</span>
              <span id="pos-SF-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Select SF
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="SF"
                title="Remove SF">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

            <!-- PF -->
            <button type="button"
              class="select-player-btn group absolute right-[18%] top-[28%] translate-x-1/2 -translate-y-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="PF">
              <span class="text-xs text-gray-500">PF</span>
              <span id="pos-PF-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Select PF
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="PF"
                title="Remove PF">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

            <!-- C -->
            <button type="button"
              class="select-player-btn group absolute left-1/2 top-[40%] -translate-x-1/2 -translate-y-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="C">
              <span class="text-xs text-gray-500">C</span>
              <span id="pos-C-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Select C
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="C"
                title="Remove C">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

            <!-- PG -->
            <button type="button"
              class="select-player-btn group absolute left-[28%] top-[56%] -translate-x-1/2 -translate-y-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="PG">
              <span class="text-xs text-gray-500">PG</span>
              <span id="pos-PG-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Select PG
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="PG"
                title="Remove PG">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

            <!-- SG -->
            <button type="button"
              class="select-player-btn group absolute right-[28%] top-[56%] translate-x-1/2 -translate-y-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="SG">
              <span class="text-xs text-gray-500">SG</span>
              <span id="pos-SG-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Select SG
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="SG"
                title="Remove SG">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

            <!-- COACH -->
            <button type="button"
              class="select-player-btn group absolute left-1/2 bottom-4 -translate-x-1/2
                     rounded-full bg-white shadow-md flex flex-col items-center justify-center
                     w-16 h-16 text-[11px] font-bold text-gray-700 border border-gray-200"
              data-position="COACH">
              <span class="text-[10px] text-gray-500">HC</span>
              <span id="pos-COACH-name" class="text-[9px] font-normal text-gray-700 leading-tight text-center px-1">
                Coach
              </span>
              <span
                class="remove-slot-btn hidden group-hover:flex absolute -top-2 -right-2 w-6 h-6 rounded-full bg-white border shadow items-center justify-center text-gray-500 hover:text-red-500"
                data-slot="COACH"
                title="Remove Coach">
                <i class="fas fa-xmark text-[12px]"></i>
              </span>
            </button>

          </div>
        </div>

        <p class="mt-2 text-[11px] text-center text-gray-500">
          Tap a circle to pick a player. Hover and press <b>×</b> to remove only that slot.
        </p>
      </section>

      <!-- RIGHT: MY TEAM LIST + CAPTAIN -->
      <aside class="space-y-4">

        <!-- My Team Card -->
        <section class="bg-white rounded-2xl shadow p-4">
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-bold text-gray-800 flex items-center gap-2">
              <i class="fas fa-users text-flb-red"></i> My Team
            </h3>
            <span class="text-xs text-gray-400">Week <span id="ui-week">1</span></span>
          </div>

          <div id="my-team-list" class="space-y-2">
            <!-- JS fills cards -->
            <p class="text-sm text-gray-500">Pick players to see your team here.</p>
          </div>

          <!-- Captain selector -->
          <div class="mt-4 border-t pt-3">
            <div class="flex items-center justify-between">
              <div class="text-sm font-bold text-gray-800">Captain</div>
              <div id="captain-pill" class="text-[11px] px-2 py-1 rounded-full bg-gray-100 text-gray-600">
                Not selected
              </div>
            </div>

            <div class="mt-2 flex gap-2">
              <button id="btnChooseCaptain" type="button" class="btn-secondary text-xs px-3 py-2 flex-1">
                Choose Captain
              </button>
              <button id="btnClearCaptain" type="button" class="text-xs px-3 py-2 rounded bg-gray-100 hover:bg-gray-200">
                Clear
              </button>
            </div>
          </div>
        </section>

        <!-- Actions -->
        <section class="bg-white rounded-2xl shadow p-4">
          <div class="grid grid-cols-1 gap-3">
            <button id="submitTeam" class="btn-primary text-sm py-3 w-full">
              Buy My Team
            </button>
            <button id="deleteTeamBtn" class="btn-secondary text-sm py-3 w-full">
              Sell My Team
            </button>
          </div>
          <p class="text-[11px] text-gray-500 mt-3">
            Tip: “Buy” saves your team. “Sell” deletes it and refunds your budget (if your backend refunds).
          </p>
        </section>

      </aside>
    </div>
  </main>

  <!-- SHOP MODAL -->
  <div id="playerModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50">
    <div class="bg-white w-[520px] max-w-[92%] p-5 rounded-2xl max-h-[85vh] overflow-hidden shadow-xl">

      <div class="flex items-start justify-between gap-3 mb-3">
        <div>
          <h2 id="modalTitle" class="text-lg font-black text-gray-800">Select</h2>
          <p id="modalSubtitle" class="text-[11px] text-gray-500">Browse & pick your player</p>
        </div>
        <button id="closeModal" type="button"
          class="w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
          <i class="fas fa-xmark"></i>
        </button>
      </div>

      <div class="flex flex-col gap-2 mb-3">
        <div class="relative">
          <i class="fas fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
          <input id="modalSearch" type="text"
            class="w-full border rounded-xl pl-9 pr-3 py-2 text-sm outline-none focus:ring-2 focus:ring-red-200"
            placeholder="Search by name or team..." />
        </div>

        <div class="flex flex-wrap gap-2">
          <button type="button" class="modal-filter-chip px-3 py-1 rounded-full bg-gray-100 text-xs font-semibold"
            data-filter="ALL">All</button>
          <button type="button" class="modal-filter-chip px-3 py-1 rounded-full bg-gray-100 text-xs font-semibold"
            data-filter="CHEAP">Cheaper</button>
          <button type="button" class="modal-filter-chip px-3 py-1 rounded-full bg-gray-100 text-xs font-semibold"
            data-filter="EXPENSIVE">Premium</button>
        </div>
      </div>

      <div class="border rounded-xl bg-gray-50 p-2 overflow-y-auto" style="max-height: 58vh;">
        <div id="modalList" class="grid grid-cols-1 gap-2"></div>
      </div>

      <p class="mt-2 text-[11px] text-gray-500">
        Tip: selecting a player replaces the current one in that position.
      </p>
    </div>
  </div>

  <!-- CAPTAIN PICKER MODAL -->
  <div id="captainModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50">
    <div class="bg-white w-[420px] max-w-[92%] p-5 rounded-2xl shadow-xl">
      <div class="flex items-start justify-between gap-3 mb-3">
        <div>
          <h2 class="text-lg font-black text-gray-800">Choose Captain</h2>
          <p class="text-[11px] text-gray-500">Pick one of your selected players</p>
        </div>
        <button id="closeCaptainModal" type="button"
          class="w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
          <i class="fas fa-xmark"></i>
        </button>
      </div>

      <div id="captainList" class="space-y-2"></div>

      <button id="btnConfirmCaptain" type="button" class="btn-primary text-sm py-3 w-full mt-3">
        Confirm Captain
      </button>
    </div>
  </div>

  <!-- TOAST / POPUP -->
  <div id="toast" class="hidden fixed top-4 left-1/2 -translate-x-1/2 z-[9999]">
    <div id="toastBox"
      class="bg-white border shadow-lg rounded-2xl px-4 py-3 flex items-start gap-3 min-w-[320px]">
      <div id="toastIcon" class="w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center">
        <i class="fas fa-circle-exclamation"></i>
      </div>
      <div class="flex-1">
        <div id="toastTitle" class="font-bold text-gray-800 text-sm">Error</div>
        <div id="toastMsg" class="text-xs text-gray-500 mt-0.5">Message</div>
      </div>
      <button id="toastClose" class="text-gray-400 hover:text-gray-700">
        <i class="fas fa-xmark"></i>
      </button>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <nav class="fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-between px-6 py-3 z-40">
    <a href="team-builder.html" class="nav-item active">
      <i class="fas fa-tshirt"></i><span>Team</span>
    </a>
    <a href="leaderboard.html" class="nav-item">
      <i class="fas fa-trophy"></i><span>Rank</span>
    </a>
    <a href="my-stats.html" class="nav-item">
      <i class="fas fa-chart-bar"></i><span>Stats</span>
    </a>
    <a href="rules.html" class="nav-item">
      <i class="fas fa-book"></i><span>Rules</span>
    </a>
  </nav>
  <!-- NICE ALERT MODAL -->
  <div id="ui-alert" class="hidden fixed inset-0 bg-black/50 z-[999] flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden">
      <div class="px-5 py-4 flex items-center gap-3 bg-gray-50 border-b">
        <div id="ui-alert-icon" class="w-10 h-10 rounded-xl flex items-center justify-center bg-gray-200 text-gray-700">
          <i class="fas fa-circle-info"></i>
        </div>
        <div class="min-w-0">
          <div id="ui-alert-title" class="font-black text-gray-900">Message</div>
          <div id="ui-alert-sub" class="text-xs text-gray-500">Info</div>
        </div>
        <button id="ui-alert-close-x" type="button"
          class="ml-auto w-9 h-9 rounded-full bg-white border hover:bg-gray-50 flex items-center justify-center">
          <i class="fas fa-xmark"></i>
        </button>
      </div>
      <div class="px-5 py-4">
        <p id="ui-alert-msg" class="text-sm text-gray-700"></p>
      </div>
      <div class="px-5 py-4 bg-gray-50 border-t flex justify-end gap-2">
        <button id="ui-alert-close" type="button" class="btn-primary text-sm px-4 py-2">OK</button>
      </div>
    </div>
  </div>

  <!-- NICE CONFIRM MODAL -->
  <div id="ui-confirm" class="hidden fixed inset-0 bg-black/50 z-[999] flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden">
      <div class="px-5 py-4 flex items-center gap-3 bg-gray-50 border-b">
        <div class="w-10 h-10 rounded-xl flex items-center justify-center bg-yellow-100 text-yellow-700">
          <i class="fas fa-circle-exclamation"></i>
        </div>
        <div class="min-w-0">
          <div id="ui-confirm-title" class="font-black text-gray-900">Confirm</div>
          <div id="ui-confirm-sub" class="text-xs text-gray-500">Please confirm</div>
        </div>
        <button id="ui-confirm-close-x" type="button"
          class="ml-auto w-9 h-9 rounded-full bg-white border hover:bg-gray-50 flex items-center justify-center">
          <i class="fas fa-xmark"></i>
        </button>
      </div>
      <div class="px-5 py-4">
        <p id="ui-confirm-msg" class="text-sm text-gray-700"></p>
      </div>
      <div class="px-5 py-4 bg-gray-50 border-t flex justify-end gap-2">
        <button id="ui-confirm-cancel" type="button" class="btn-secondary text-sm px-4 py-2">Cancel</button>
        <button id="ui-confirm-ok" type="button" class="btn-primary text-sm px-4 py-2">Confirm</button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="ui-toast" class="hidden fixed bottom-6 right-6 z-[999]">
    <div class="bg-gray-900 text-white text-sm px-4 py-3 rounded-xl shadow-lg flex items-center gap-2">
      <i class="fas fa-check-circle"></i>
      <span id="ui-toast-msg">Done</span>
    </div>
  </div>

  <script>
    (function () {
      // ---------- ALERT ----------
      const aModal = document.getElementById("ui-alert");
      const aCloseBtn = document.getElementById("ui-alert-close");
      const aCloseX = document.getElementById("ui-alert-close-x");
      const aTitle = document.getElementById("ui-alert-title");
      const aSub = document.getElementById("ui-alert-sub");
      const aMsg = document.getElementById("ui-alert-msg");
      const aIconBox = document.getElementById("ui-alert-icon");

      window.uiAlert = function ({ type = "info", titleText = "Message", subText = "", message = "" }) {
        aTitle.textContent = titleText;
        aSub.textContent = subText;
        aMsg.textContent = message;

        const map = {
          success: { bg: "bg-green-100", txt: "text-green-700", ico: "fa-check" },
          error:   { bg: "bg-red-100",   txt: "text-red-700",   ico: "fa-triangle-exclamation" },
          warn:    { bg: "bg-yellow-100",txt: "text-yellow-700",ico: "fa-circle-exclamation" },
          info:    { bg: "bg-blue-100",  txt: "text-blue-700",  ico: "fa-circle-info" },
        };
        const v = map[type] || map.info;

        aIconBox.className = `w-10 h-10 rounded-xl flex items-center justify-center ${v.bg} ${v.txt}`;
        aIconBox.innerHTML = `<i class="fas ${v.ico}"></i>`;

        aModal.classList.remove("hidden");
      };

      function hideAlert() { aModal.classList.add("hidden"); }
      aCloseBtn?.addEventListener("click", hideAlert);
      aCloseX?.addEventListener("click", hideAlert);
      aModal?.addEventListener("click", (e) => { if (e.target === aModal) hideAlert(); });

      // ---------- CONFIRM ----------
      const cModal = document.getElementById("ui-confirm");
      const cTitle = document.getElementById("ui-confirm-title");
      const cSub = document.getElementById("ui-confirm-sub");
      const cMsg = document.getElementById("ui-confirm-msg");
      const cOk = document.getElementById("ui-confirm-ok");
      const cCancel = document.getElementById("ui-confirm-cancel");
      const cCloseX = document.getElementById("ui-confirm-close-x");

      window.uiConfirm = function ({
        titleText = "Confirm",
        subText = "",
        message = "Are you sure?",
        okText = "Confirm",
        cancelText = "Cancel"
      } = {}) {
        return new Promise((resolve) => {
          cTitle.textContent = titleText;
          cSub.textContent = subText;
          cMsg.textContent = message;
          cOk.textContent = okText;
          cCancel.textContent = cancelText;

          cModal.classList.remove("hidden");

          const cleanup = () => {
            cModal.classList.add("hidden");
            cOk.onclick = null;
            cCancel.onclick = null;
            cCloseX.onclick = null;
            cModal.onclick = null;
          };

          cOk.onclick = () => { cleanup(); resolve(true); };
          cCancel.onclick = () => { cleanup(); resolve(false); };
          cCloseX.onclick = () => { cleanup(); resolve(false); };
          cModal.onclick = (e) => { if (e.target === cModal) { cleanup(); resolve(false); } };
        });
      };

      // ---------- TOAST ----------
      const toast = document.getElementById("ui-toast");
      const toastMsg = document.getElementById("ui-toast-msg");
      let toastTimer = null;

      window.uiToast = function (message) {
        toastMsg.textContent = message || "Done";
        toast.classList.remove("hidden");
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => toast.classList.add("hidden"), 2200);
      };
    })();
  </script>

  <script type="module" src="js/team-builder.js"></script>
</body>

</html>
